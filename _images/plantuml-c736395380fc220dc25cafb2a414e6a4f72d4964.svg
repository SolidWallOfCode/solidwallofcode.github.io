<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="405px" preserveAspectRatio="none" style="width:885px;height:405px;" version="1.1" viewBox="0 0 885 405" width="885px" zoomAndPan="magnify"><defs><filter height="300%" id="f1dlmpbo1drqi1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster HttpSM--><polygon fill="#FFFFFF" filter="url(#f1dlmpbo1drqi1)" points="22,24,84,24,91,46.2969,815,46.2969,815,187,22,187,22,24" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="22" x2="91" y1="46.2969" y2="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="26" y="38.9951">HttpSM</text><!--cluster Strategy--><polygon fill="#FFFFFF" filter="url(#f1dlmpbo1drqi1)" points="324,233,397,233,404,255.2969,756,255.2969,756,393,324,393,324,233" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="324" x2="404" y1="255.2969" y2="255.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="328" y="247.9951">Strategy</text><ellipse cx="121" cy="71" fill="#000000" filter="url(#f1dlmpbo1drqi1)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="38" y="137"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="146" x="48" y="158.1387">Determine strategy tag</text><polygon fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" points="715,59,727,71,715,83,703,71,715,59" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#000000" filter="url(#f1dlmpbo1drqi1)" height="8" style="stroke: none; stroke-width: 1.0;" width="80" x="531" y="150"/><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="168" x="631" y="137"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="148" x="641" y="158.1387">Read Response Header</text><polygon fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" points="430,59,442,71,430,83,418,71,430,59" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="349.5" y="137"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="359.5" y="158.1387">Forward to User Agent</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="224.5" y="137"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="234.5" y="158.1387">Drain session</text><ellipse cx="789" cy="71" fill="none" filter="url(#f1dlmpbo1drqi1)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="789.5" cy="71.5" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="340.5" y="343"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="171" x="350.5" y="364.1387">Create strategizer instance</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="340" y="268"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="116" x="350" y="289.1387">Connect upstream</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="565" y="343"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="575" y="364.1387">Event: SESSION_READY</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="496" y="268"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="506" y="289.1387">Compute next action</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="666" y="268"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="54" x="676" y="289.1387">Destruct</text><!--link start to Determine strategy tag--><path d="M121,81.29 C121,93.46 121,115.17 121,131.53 " fill="none" id="start-Determine strategy tag" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="121,136.85,125,127.85,121,131.85,117,127.85,121,136.85" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Determine strategy tag to Create strategizer instance--><path d="M142.09,171.11 C179.16,199.13 258.85,258.07 330,302 C352.31,315.78 378.23,329.75 398.85,340.41 " fill="none" id="Determine strategy tag-Create strategizer instance" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="403.43,342.77,397.2764,335.0802,398.9897,340.4713,393.5986,342.1846,403.43,342.77" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Connect upstream to Create strategizer instance--><path d="M416.03,306.92 C420.41,318.34 425.75,332.27 429.8,342.84 " fill="none" id="Connect upstream-Create strategizer instance" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="414.21,302.2,413.7135,312.0363,416.0078,306.8656,421.1785,309.1599,414.21,302.2" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Connect upstream to Event: SESSION_READY--><path d="M460.23,302.02 C498.08,313.63 549.24,329.32 588.3,341.3 " fill="none" id="Connect upstream-Event: SESSION_READY" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="593.48,342.89,586.0353,336.442,588.6968,341.4336,583.7051,344.0951,593.48,342.89" style="stroke: #A80036; stroke-width: 1.0;"/><!--link #14 to Event: SESSION_READY--><path d="M729.11,75.31 C746.18,79.75 775.32,88.77 797,103 C814.6,114.56 822.09,117.48 830,137 C839.69,160.89 838.13,170.54 830,195 C811.27,251.34 794.83,263.07 750,302 C730.41,319.01 704.91,333.08 684.07,342.99 " fill="none" id="#14-Event: SESSION_READY" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="724.22,74.08,731.9643,80.1648,729.0673,75.3061,733.9261,72.4091,724.22,74.08" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="618.7205" y="94.0099">send request</text><!--link #14 to RESULT--><path d="M707.45,75.93 C696.33,81.73 674.95,92.99 657,103 C629.11,118.55 596.65,137.72 580.77,147.17 " fill="none" id="#14-RESULT" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="576.39,149.77,586.1672,148.5839,580.6812,147.2038,582.0613,141.7179,576.39,149.77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="658" y="114.2104">net error</text><!--link #14 to Read Response Header--><path d="M715,83.26 C715,95.76 715,116.21 715,131.74 " fill="none" id="#14-Read Response Header" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="715,136.8,719,127.8,715,131.8,711,127.8,715,136.8" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="716" y="114.2104">success</text><!--link Read Response Header to RESULT--><path d="M630.68,154 C625.91,154 621.15,154 616.39,154 " fill="none" id="Read Response Header-RESULT" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="611.22,154,620.22,158,616.22,154,620.22,150,611.22,154" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RESULT to Compute next action--><path d="M571,158.19 C571,172.35 571,230.22 571,262.32 " fill="none" id="RESULT-Compute next action" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="571,267.61,575,258.61,571,262.61,567,258.61,571,267.61" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Compute next action to #25--><path d="M589.24,267.97 C605.6,254.44 630.85,235.64 656,225 C719.82,198 764.97,248.51 809,195 C825.38,175.1 819.82,160.4 809,137 C799.21,115.82 790.51,112.04 769,103 C709.62,78.05 505.6,73.11 446.29,72.2 " fill="none" id="Compute next action-#25" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="441.01,72.12,449.9519,76.2482,446.0095,72.1914,450.0662,68.249,441.01,72.12" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="42" x="450.0128" y="84.4461">ACTION</text><!--link #25 to Forward to User Agent--><path d="M430,83.26 C430,95.76 430,116.21 430,131.74 " fill="none" id="#25-Forward to User Agent" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="430,136.8,434,127.8,430,131.8,426,127.8,430,136.8" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="32" x="431" y="114.2104">DONE</text><!--link #25 to Drain session--><path d="M422.62,75.91 C403.03,86.28 348.7,115.04 312.23,134.35 " fill="none" id="#25-Drain session" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="307.43,136.89,317.2558,136.2171,311.8496,134.5519,313.5148,129.1457,307.43,136.89" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="369" y="114.2104">RETRY</text><!--link Drain session to Connect upstream--><path d="M293.33,171.08 C317.25,194.64 361.81,238.51 387.78,264.08 " fill="none" id="Drain session-Connect upstream" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="391.47,267.72,387.8602,258.5565,387.906,264.2132,382.2493,264.259,391.47,267.72" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="340" y="214.2104">finish()</text><!--link Forward to User Agent to Destruct--><path d="M462.25,171.02 C479.39,179.06 500.99,188.45 521,195 C579.41,214.12 603.87,192.43 656,225 C671.17,234.48 683.53,250.63 691.76,263.64 " fill="none" id="Forward to User Agent-Destruct" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="694.39,267.92,693.0889,258.1575,691.7735,263.6593,686.2717,262.3439,694.39,267.92" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="642" y="214.2104">finish()</text><!--link Destruct to end--><path d="M740.26,277.99 C774.35,270.29 822.91,253.32 846,217 C873.18,174.24 871.89,146.55 846,103 C836.95,87.78 817.54,79.57 803.89,75.49 " fill="none" id="Destruct-end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="798.8,74.08,806.4116,80.3301,803.6198,75.4101,808.5398,72.6183,798.8,74.08" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
partition HttpSM {
   (*) - -> "Determine strategy tag"
}

partition Strategy {
   "Determine strategy tag" - -> "Create strategizer instance"
   "Create strategizer instance" -u-> "Connect upstream"
   "Connect upstream" - -> "Event: SESSION_READY"
}

partition HttpSM {
   "Event: SESSION_READY" -l->  if "send request" then
      - ->[net error] ===RESULT===
   else
      - ->[success] "Read Response Header"
      -> ===RESULT===
   endif
}

partition Strategy {
   - -> "Compute next action"
}

partition HttpSM {
   if "ACTION" then
      - ->[DONE] "Forward to User Agent"
   else
      - ->[RETRY] "Drain session"
   endif
}

partition Strategy {
   "Drain session" - ->[finish()] "Connect upstream"
   "Forward to User Agent" -down->[finish()] "Destruct"
}

partition HttpSM {
   "Destruct" - -> (*)
}

@enduml

PlantUML version 1.2017.18(Fri Oct 06 11:56:32 CDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_292-b10
Operating System: Linux
OS Version: 5.11.22-100.fc32.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>