<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="437px" preserveAspectRatio="none" style="width:923px;height:437px;" version="1.1" viewBox="0 0 923 437" width="923px" zoomAndPan="magnify"><defs><filter height="300%" id="f1dlmpbo1drqi1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster HttpSM--><polygon fill="#FFFFFF" filter="url(#f1dlmpbo1drqi1)" points="14,16,76,16,83,38.2969,791,38.2969,791,205,14,205,14,16" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="14" x2="83" y1="38.2969" y2="38.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="18" y="30.9951">HttpSM</text><!--cluster Strategy--><polygon fill="#FFFFFF" filter="url(#f1dlmpbo1drqi1)" points="316,239,389,239,396,261.2969,732,261.2969,732,425,316,425,316,239" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="316" x2="396" y1="261.2969" y2="261.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="320" y="253.9951">Strategy</text><ellipse cx="105" cy="55" fill="#000000" filter="url(#f1dlmpbo1drqi1)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="22" y="163"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="146" x="32" y="184.1387">Determine strategy tag</text><polygon fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" points="699,43,711,55,699,67,687,55,699,43" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#000000" filter="url(#f1dlmpbo1drqi1)" height="8" style="stroke: none; stroke-width: 1.0;" width="80" x="515" y="176"/><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="168" x="615" y="163"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="148" x="625" y="184.1387">Read Response Header</text><polygon fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" points="414,43,426,55,414,67,402,55,414,43" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="333.5" y="163"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="343.5" y="184.1387">Forward to User Agent</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="208.5" y="163"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="218.5" y="184.1387">Drain session</text><ellipse cx="773" cy="55" fill="none" filter="url(#f1dlmpbo1drqi1)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="773.5" cy="55.5" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="324.5" y="383"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="171" x="334.5" y="404.1387">Create strategizer instance</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="324" y="266"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="116" x="334" y="287.1387">Connect upstream</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="549" y="383"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="559" y="404.1387">Event: SESSION_READY</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="480" y="266"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="490" y="287.1387">Compute next action</text><rect fill="#FEFECE" filter="url(#f1dlmpbo1drqi1)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="650" y="266"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="54" x="660" y="287.1387">Destruct</text><!--link start to Determine strategy tag--><path d="M105,65.2293 C105,85.3455 105,130.463 105,157.7549 " fill="none" id="start-Determine strategy tag" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="105,162.963,109,153.963,105,157.963,101,153.963,105,162.963" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Determine strategy tag to Create strategizer instance--><path d="M129.4554,197.08 C186.768,237.1078 329.5476,336.8269 391.0571,379.7859 " fill="none" id="Determine strategy tag-Create strategizer instance" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="395.343,382.7792,390.2548,374.3465,391.2438,379.9163,385.6741,380.9053,395.343,382.7792" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Connect upstream to Create strategizer instance--><path d="M397.2467,304.9237 C402.659,327.5394 410.9861,362.3346 415.9236,382.9667 " fill="none" id="Connect upstream-Create strategizer instance" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="396.0714,300.0128,394.2759,309.6966,397.2351,304.8755,402.0562,307.8347,396.0714,300.0128" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Connect upstream to Event: SESSION_READY--><path d="M426.6072,300.0128 C470.2322,321.4587 545.0327,358.2303 590.7464,380.7031 " fill="none" id="Connect upstream-Event: SESSION_READY" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="595.351,382.9667,589.0389,375.4065,590.8639,380.7609,585.5095,382.5859,595.351,382.9667" style="stroke: #A80036; stroke-width: 1.0;"/><!--link #14 to Event: SESSION_READY--><path d="M713.1564,59.2714 C758.6243,73.9566 898,126.8919 898,224 C898,224 898,224 898,341.5 C898,360.847 790.0155,379.2036 711.1361,390.0318 " fill="none" id="#14-Event: SESSION_READY" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="708.3313,57.7436,715.704,64.2737,713.0981,59.2529,718.1189,56.6469,708.3313,57.7436" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="602.9459" y="77.3286">send request</text><!--link #14 to RESULT--><path d="M692.4384,60.6958 C669.1372,80.9226 590.3512,149.3132 563.8109,172.3517 " fill="none" id="#14-RESULT" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="559.7501,175.8766,569.1687,172.9974,563.5259,172.5989,563.9244,166.9561,559.7501,175.8766" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="638" y="119.2104">net error</text><!--link #14 to Read Response Header--><path d="M699,67.4425 C699,88.5155 699,131.4992 699,157.8252 " fill="none" id="#14-Read Response Header" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="699,162.8569,703,153.8569,699,157.8569,695,153.8569,699,162.8569" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="700" y="119.2104">success</text><!--link Read Response Header to RESULT--><path d="M614.6777,180 C609.9143,180 605.1509,180 600.3875,180 " fill="none" id="Read Response Header-RESULT" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="595.2188,180,604.2188,184,600.2188,180,604.2188,176,595.2188,180" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RESULT to Compute next action--><path d="M555,184.4258 C555,197.3673 555,235.7944 555,260.6714 " fill="none" id="RESULT-Compute next action" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="555,265.7601,559,256.7601,555,260.7601,551,256.7601,555,265.7601" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Compute next action to #25--><path d="M583.6558,265.7937 C599.752,256.7431 620.4752,246.0866 640,239 C705.4792,215.2341 749.4126,259.3368 793,205 C804.6802,190.4392 798.7726,180.7517 793,163 C783.6529,134.2561 778.791,123.7609 753,108 C697.6155,74.1544 490.8695,59.5255 430.5925,55.9225 " fill="none" id="Compute next action-#25" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="425.5432,55.6261,434.2933,60.1466,430.5346,55.9191,434.7621,52.1604,425.5432,55.6261" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="42" x="433.8824" y="67.6376">ACTION</text><!--link #25 to Forward to User Agent--><path d="M414,67.4425 C414,88.5155 414,131.4992 414,157.8252 " fill="none" id="#25-Forward to User Agent" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="414,162.8569,418,153.8569,414,157.8569,410,153.8569,414,162.8569" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="32" x="415" y="119.2104">DONE</text><!--link #25 to Drain session--><path d="M407.0283,60.6958 C385.9624,77.9066 322.2141,129.9885 286.2992,159.3308 " fill="none" id="#25-Drain session" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="282.062,162.7925,291.5624,160.1959,285.934,159.6291,286.5009,154.0007,282.062,162.7925" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="349" y="119.2104">RETRY</text><!--link Drain session to Connect upstream--><path d="M282.632,197.0084 C305.5768,215.0489 341.8134,243.5403 366.2231,262.7327 " fill="none" id="Drain session-Connect upstream" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="370.3359,265.9664,365.7334,257.2591,366.4054,262.8759,360.7886,263.5479,370.3359,265.9664" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="323" y="228.2104">finish()</text><!--link Forward to User Agent to Destruct--><path d="M475.6293,197.1229 C485.4444,199.7945 495.4935,202.4974 505,205 C564.835,220.7519 585.6884,209.3589 640,239 C650.6238,244.798 660.669,253.5631 668.7245,261.748 " fill="none" id="Forward to User Agent-Destruct" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="672.513,265.7039,669.1768,256.4373,669.0546,262.0928,663.3991,261.9707,672.513,265.7039" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="622" y="228.2104">finish()</text><!--link Destruct to end--><path d="M724.0683,278.8849 C756.3618,273.3694 802.2456,260.5633 830,231 C875.63,182.396 911.2269,140.9045 872,87 C861.9782,73.2283 812.9971,62.3813 787.8951,57.6235 " fill="none" id="Destruct-end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="782.9237,56.7018,791.0436,62.2756,787.8399,57.6134,792.5021,54.4096,782.9237,56.7018" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
partition HttpSM {
   (*) - -> "Determine strategy tag"
}

partition Strategy {
   "Determine strategy tag" - -> "Create strategizer instance"
   "Create strategizer instance" -u-> "Connect upstream"
   "Connect upstream" - -> "Event: SESSION_READY"
}

partition HttpSM {
   "Event: SESSION_READY" -l->  if "send request" then
      - ->[net error] ===RESULT===
   else
      - ->[success] "Read Response Header"
      -> ===RESULT===
   endif
}

partition Strategy {
   - -> "Compute next action"
}

partition HttpSM {
   if "ACTION" then
      - ->[DONE] "Forward to User Agent"
   else
      - ->[RETRY] "Drain session"
   endif
}

partition Strategy {
   "Drain session" - ->[finish()] "Connect upstream"
   "Forward to User Agent" -down->[finish()] "Destruct"
}

partition HttpSM {
   "Destruct" - -> (*)
}

@enduml

PlantUML version 1.2017.18(Fri Oct 06 11:56:32 CDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_242-b08
Operating System: Linux
OS Version: 5.5.8-100.fc30.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>