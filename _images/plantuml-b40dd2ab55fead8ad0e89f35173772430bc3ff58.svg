<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="564px" preserveAspectRatio="none" style="width:718px;height:564px;" version="1.1" viewBox="0 0 718 564" width="718px" zoomAndPan="magnify"><defs><filter height="300%" id="f1bee7pkk0utax" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FEFECE" filter="url(#f1bee7pkk0utax)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="267" y="89"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="267" x2="363" y1="115.2969" y2="115.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="277" y="106.9951">open_read</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="68" x="272" y="131.4355">create ODE</text><rect fill="#FEFECE" filter="url(#f1bee7pkk0utax)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="6" y="249"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="6" x2="142" y1="275.2969" y2="275.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="40.5" y="266.9951">read_first</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="116" x="11" y="291.4355">altvec_read := true</text><rect fill="#FEFECE" filter="url(#f1bee7pkk0utax)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="257.5" y="249"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="257.5" x2="372.5" y1="275.2969" y2="275.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="281" y="266.9951">dir_probe</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="262.5" y="291.4355">loop on collision</text><rect fill="#FEFECE" filter="url(#f1bee7pkk0utax)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="239" y="503"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="239" x2="391" y1="529.2969" y2="529.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="265" y="520.9951">altvec_update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="244" y="545.4355">altvec_update := true</text><rect fill="#FEFECE" filter="url(#f1bee7pkk0utax)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="238.5" y="376"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="238.5" x2="391.5" y1="402.2969" y2="402.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="281.5" y="393.9951">alt_select</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="243.5" y="418.4355">wait on altvec_update</text><ellipse cx="315" cy="18" fill="#000000" filter="url(#f1bee7pkk0utax)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1bee7pkk0utax)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="190.5" y="169"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="190.5" x2="329.5" y1="195.2969" y2="195.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="200.5" y="186.9951">wait_altvec_read</text><rect fill="#FEFECE" filter="url(#f1bee7pkk0utax)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="647.5" y="376"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="647.5" x2="706.5" y1="402.2969" y2="402.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="657.5" y="393.9951">serve</text><rect fill="#FEFECE" filter="url(#f1bee7pkk0utax)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="536" y="376"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="536" x2="612" y1="402.2969" y2="402.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="546" y="393.9951">slice_fill</text><rect fill="#FEFECE" filter="url(#f1bee7pkk0utax)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="54.5" y="376"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="54.5" x2="163.5" y1="402.2969" y2="402.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="64.5" y="393.9951">slice_update</text><!--link *start to open_read--><path d="M315,28.2737 C315,41.3608 315,64.5555 315,83.5207 " fill="none" id="*start-open_read" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="315,88.7458,319,79.7458,315,83.7458,311,79.7458,315,88.7458" style="stroke: #A80036; stroke-width: 1.0;"/><!--link open_read to dir_probe--><path d="M323.9354,139.1366 C326.7937,148.3981 329.5831,159.0566 331,169 C334.135,191 334.135,197 331,219 C329.8266,227.2344 327.712,235.9592 325.3965,243.9749 " fill="none" id="open_read-dir_probe" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="323.9354,248.8634,330.3452,241.3858,325.3672,244.0728,322.6802,239.0949,323.9354,248.8634" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="335" y="198.5669">!altvec_read</text><!--link open_read to wait_altvec_read--><path d="M297.5977,139.3125 C292.1276,147.269 286.0385,156.1259 280.3811,164.3548 " fill="none" id="open_read-wait_altvec_read" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="277.2891,168.8522,285.684,163.702,280.1218,164.732,279.0917,159.1697,277.2891,168.8522" style="stroke: #A80036; stroke-width: 1.0;"/><!--link wait_altvec_read to dir_probe--><path d="M277.4023,219.3125 C282.8724,227.269 288.9615,236.1259 294.6189,244.3548 " fill="none" id="wait_altvec_read-dir_probe" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="297.7109,248.8522,295.9083,239.1697,294.8782,244.732,289.316,243.702,297.7109,248.8522" style="stroke: #A80036; stroke-width: 1.0;"/><!--link read_first to dir_probe--><path d="M147.3088,290.9871 C170.4459,294.4864 196.1319,296.4528 219.75,294 C232.0189,292.7258 245.0358,290.552 257.3766,288.0953 " fill="none" id="read_first-dir_probe" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="142.105,290.1681,150.3734,295.5191,147.0442,290.9457,151.6176,287.6164,142.105,290.1681" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="180.75" y="290.0669">dir hit</text><!--link read_first to dir_probe--><path d="M142.0946,274 C176.5789,274 218.1746,274 251.9255,274 " fill="none" id="read_first-dir_probe" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="257.2727,274,248.2727,270,252.2727,274,248.2727,278,257.2727,274" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="160.25" y="267.0669">IO complete</text><!--link dir_probe to alt_select--><path d="M315,299.0911 C315,319.7035 315,348.9647 315,370.8484 " fill="none" id="dir_probe-alt_select" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="315,375.961,319,366.961,315,370.961,311,366.961,315,375.961" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="316" y="342.0669">doc hit</text><!--link alt_select to altvec_update--><path d="M315,426.0911 C315,446.7035 315,475.9647 315,497.8484 " fill="none" id="alt_select-altvec_update" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="315,502.961,319,493.961,315,497.961,311,493.961,315,502.961" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="316" y="469.0669">fail</text><!--link alt_select to serve--><path d="M360.607,375.9958 C412.0518,351.0303 498.1171,319.0336 571.5,339 C597.2284,346.0003 623.0873,361.0389 642.7646,374.5514 " fill="none" id="alt_select-serve" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="647.1204,377.587,642.0237,369.1595,643.0183,374.7282,637.4496,375.7228,647.1204,377.587" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="467.5" y="342.0669">fresh &amp; covered</text><!--link alt_select to slice_fill--><path d="M391.6573,401 C436.8685,401 492.4517,401 530.283,401 " fill="none" id="alt_select-slice_fill" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="535.7325,401,526.7325,397,530.7325,401,526.7325,405,535.7325,401" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="409.75" y="394.0669">fresh &amp; !covered</text><!--link slice_update to alt_select--><path d="M168.8245,401 C190.5453,401 215.3939,401 238.3664,401 " fill="none" id="slice_update-alt_select" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="163.6634,401,172.6634,405,168.6634,401,172.6634,397,163.6634,401" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="182" y="394.0669">!fresh</text><!--
@startuml
state open_read : create ODE
state read_first : altvec_read := true
state dir_probe : loop on collision
state altvec_update : altvec_update := true
state alt_select : wait on altvec_update

[*] - -> open_read
open_read - -> dir_probe : !altvec_read
open_read -> wait_altvec_read : altvec_read
wait_altvec_read -> dir_probe : wake up
dir_probe -l> read_first : dir hit
read_first -> dir_probe : IO complete
dir_probe - -> alt_select : doc hit
alt_select - -> altvec_update : fail
alt_select -> serve : fresh & covered
alt_select -> slice_fill : fresh & !covered
alt_select -l> slice_update : !fresh

@enduml

PlantUML version 1.2017.18(Fri Oct 06 11:56:32 CDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Linux
OS Version: 4.14.5-300.fc27.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>