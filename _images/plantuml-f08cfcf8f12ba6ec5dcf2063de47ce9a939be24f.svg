<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="657px" preserveAspectRatio="none" style="width:641px;height:657px;" version="1.1" viewBox="0 0 641 657" width="641px" zoomAndPan="magnify"><defs><filter height="300%" id="fwqc0jga2kc7t" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDFFDD" height="642.5859" style="stroke: #A80036; stroke-width: 1.0;" width="437.8333" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="168.4167" y="16.0669">Client Network</text><rect fill="#DDDDFF" height="642.5859" style="stroke: #A80036; stroke-width: 1.0;" width="184.5" x="443.8333" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="466.0833" y="16.0669">Corporate Network</text><rect fill="#FFFFFF" filter="url(#fwqc0jga2kc7t)" height="413.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="137.4297"/><rect fill="#FFFFFF" filter="url(#fwqc0jga2kc7t)" height="326.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="395.3333" y="224.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="31" x2="31" y1="106.4297" y2="560.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="107" x2="107" y1="106.4297" y2="560.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="273.5" x2="273.5" y1="106.4297" y2="560.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="399.8333" x2="399.8333" y1="106.4297" y2="560.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="488.8333" x2="488.8333" y1="106.4297" y2="560.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="594.3333" x2="594.3333" y1="106.4297" y2="560.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="8" y="103.1279">Client</text><ellipse cx="31.5" cy="33.1328" fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M31.5,41.1328 L31.5,68.1328 M18.5,49.1328 L44.5,49.1328 M31.5,68.1328 L18.5,83.1328 M31.5,68.1328 L44.5,83.1328 " fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="8" y="572.2842">Client</text><ellipse cx="31.5" cy="585.5859" fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M31.5,593.5859 L31.5,620.5859 M18.5,601.5859 L44.5,601.5859 M31.5,620.5859 L18.5,635.5859 M31.5,620.5859 L44.5,635.5859 " fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="65" y="86.8311">User Agent</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="80.5" y="103.1279">VConn</text><ellipse cx="107" cy="57.8359" fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="95" x2="119" y1="71.8359" y2="71.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="65" y="572.2842">User Agent</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="80.5" y="588.5811">VConn</text><ellipse cx="107" cy="607.8828" fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="95" x2="119" y1="621.8828" y2="621.8828"/><rect fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="223.5" y="71.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="230.5" y="91.1279">Ingress ATS</text><rect fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="223.5" y="559.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="230.5" y="579.2842">Ingress ATS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="362.8333" y="86.8311">Upstream</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="373.8333" y="103.1279">VConn</text><ellipse cx="400.3333" cy="57.8359" fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="388.3333" x2="412.3333" y1="71.8359" y2="71.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="362.8333" y="572.2842">Upstream</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="373.8333" y="588.5811">VConn</text><ellipse cx="400.3333" cy="607.8828" fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="388.3333" x2="412.3333" y1="621.8828" y2="621.8828"/><rect fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="447.8333" y="71.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="454.8333" y="91.1279">Peer ATS</text><rect fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="447.8333" y="559.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="454.8333" y="579.2842">Peer ATS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="565.3333" y="103.1279">Service</text><path d="M576.8333,54.1328 C576.8333,44.1328 594.8333,44.1328 594.8333,44.1328 C594.8333,44.1328 612.8333,44.1328 612.8333,54.1328 L612.8333,80.1328 C612.8333,90.1328 594.8333,90.1328 594.8333,90.1328 C594.8333,90.1328 576.8333,90.1328 576.8333,80.1328 L576.8333,54.1328 " fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M576.8333,54.1328 C576.8333,64.1328 594.8333,64.1328 594.8333,64.1328 C594.8333,64.1328 612.8333,64.1328 612.8333,54.1328 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="565.3333" y="572.2842">Service</text><path d="M576.8333,585.5859 C576.8333,575.5859 594.8333,575.5859 594.8333,575.5859 C594.8333,575.5859 612.8333,575.5859 612.8333,585.5859 L612.8333,611.5859 C612.8333,621.5859 594.8333,621.5859 594.8333,621.5859 C594.8333,621.5859 576.8333,621.5859 576.8333,611.5859 L576.8333,585.5859 " fill="#FEFECE" filter="url(#fwqc0jga2kc7t)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M576.8333,585.5859 C576.8333,595.5859 594.8333,595.5859 594.8333,595.5859 C594.8333,595.5859 612.8333,595.5859 612.8333,585.5859 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fwqc0jga2kc7t)" height="413.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="137.4297"/><rect fill="#FFFFFF" filter="url(#fwqc0jga2kc7t)" height="326.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="395.3333" y="224.8281"/><polygon fill="#A80036" points="262,133.4297,272,137.4297,262,141.4297,266,137.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="268" y1="137.4297" y2="137.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="38.5" y="132.4966">TCP or TLS connect</text><polygon fill="#A80036" points="262,162.5625,272,166.5625,262,170.5625,266,166.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="268" y1="166.5625" y2="166.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="38.5" y="161.6294">HTTP CONNECT</text><polygon fill="#A80036" points="123,191.6953,113,195.6953,123,199.6953,119,195.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="273" y1="195.6953" y2="195.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="129" y="190.7622">Intercept Transaction</text><polygon fill="#A80036" points="476.8333,220.8281,486.8333,224.8281,476.8333,228.8281,480.8333,224.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="274" x2="482.8333" y1="224.8281" y2="224.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="281" y="219.895">TLS connect</text><polygon fill="#FBFB77" filter="url(#fwqc0jga2kc7t)" points="230,237.9609,230,262.9609,531,262.9609,531,247.9609,521,237.9609,230,237.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="521" x2="521" y1="237.9609" y2="247.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="531" x2="521" y1="247.9609" y2="247.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="328.1667" y="255.0278">Secure Tunnel</text><polygon fill="#A80036" points="476.8333,289.0938,486.8333,293.0938,476.8333,297.0938,480.8333,293.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="274" x2="482.8333" y1="293.0938" y2="293.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="281" y="288.1606">HTTP CONNECT</text><polygon fill="#FBFB77" filter="url(#fwqc0jga2kc7t)" points="417,306.2266,417,346.2266,555,346.2266,555,316.2266,545,306.2266,417,306.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="545" x2="545" y1="306.2266" y2="316.2266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="555" x2="545" y1="316.2266" y2="316.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="423" y="323.2935">DNS for Service is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="423" y="338.4263">done here.</text><polygon fill="#A80036" points="582.8333,372.4922,592.8333,376.4922,582.8333,380.4922,586.8333,376.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488.8333" x2="588.8333" y1="376.4922" y2="376.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="495.8333" y="371.5591">TCP Connect</text><polygon fill="#FBFB77" filter="url(#fwqc0jga2kc7t)" points="8,389.625,8,429.625,619,429.625,619,399.625,609,389.625,8,389.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="609" x2="609" y1="389.625" y2="399.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="619" x2="609" y1="399.625" y2="399.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="372" x="66.1667" y="406.6919">At this point data can flow between the Client and Server</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="482" x="66.1667" y="421.8247">over the secure link as a virtual connection, including any TLS handshake.</text><polygon fill="#A80036" points="42.5,440.8906,32.5,444.8906,42.5,448.8906,38.5,444.8906" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="582.8333,440.8906,592.8333,444.8906,582.8333,448.8906,586.8333,444.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36.5" x2="588.8333" y1="444.8906" y2="444.8906"/><polygon fill="#A80036" points="123,469.8906,113,473.8906,123,477.8906,119,473.8906" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="262,469.8906,272,473.8906,262,477.8906,266,473.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="268" y1="473.8906" y2="473.8906"/><path d="M133.25,461.1901 L130,464.4737 L133.25,467.6901 L133.25,465.5234 L138.6667,465.5234 L138.6667,463.3568 L133.25,463.3568 L133.25,461.1901 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="143.6667" y="468.9575">Move data</text><path d="M222.0833,461.1901 L222.0833,463.3568 L216.6667,463.3568 L216.6667,465.5234 L222.0833,465.5234 L222.0833,467.6901 L225.3333,464.4065 L222.0833,461.1901 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"/><polygon fill="#A80036" points="285,499.0234,275,503.0234,285,507.0234,281,503.0234" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="383.3333,499.0234,393.3333,503.0234,383.3333,507.0234,387.3333,503.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="389.3333" y1="503.0234" y2="503.0234"/><path d="M295.25,490.3229 L292,493.6065 L295.25,496.8229 L295.25,494.6563 L300.6667,494.6563 L300.6667,492.4896 L295.25,492.4896 L295.25,490.3229 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="305.6667" y="498.0903">Move data</text><path d="M384.0833,490.3229 L384.0833,492.4896 L378.6667,492.4896 L378.6667,494.6563 L384.0833,494.6563 L384.0833,496.8229 L387.3333,493.5393 L384.0833,490.3229 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"/><polygon fill="#FBFB77" filter="url(#fwqc0jga2kc7t)" points="149,516.1563,149,541.1563,394,541.1563,394,526.1563,384,516.1563,149,516.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="384" y1="516.1563" y2="526.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="384" y1="526.1563" y2="526.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="155" y="533.2231">Plugin explicitlys moves this data.</text><!--
@startuml

box "Client Network" #DDFFDD
actor Client
entity "User Agent\nVConn" as lvc
participant "Ingress ATS" as ingress
entity "Upstream\nVConn" as rvc
end box
box "Corporate Network" #DDDDFF
participant "Peer ATS" as peer
database Service
end box

Client -> ingress : TCP or TLS connect
activate lvc
Client -> ingress : HTTP CONNECT
ingress -> lvc : Intercept Transaction
ingress -> peer : TLS connect
activate rvc
note over ingress,peer : Secure Tunnel
ingress -> peer : HTTP CONNECT
note over peer : DNS for Service is\ndone here.
peer -> Service : TCP Connect

note over Client, Service : At this point data can flow between the Client and Server\nover the secure link as a virtual connection, including any TLS handshake.
Client <- -> Service
lvc <-> ingress : <&arrow-thick-left> Move data <&arrow-thick-right>
ingress <-> rvc : <&arrow-thick-left> Move data <&arrow-thick-right>
note over ingress : Plugin explicitlys moves this data.

@enduml

PlantUML version 1.2017.18(Fri Oct 06 11:56:32 CDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Linux
OS Version: 4.13.13-200.fc26.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>