<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="700px" preserveAspectRatio="none" style="width:471px;height:700px;" version="1.1" viewBox="0 0 471 700" width="471px" zoomAndPan="magnify"><defs><filter height="300%" id="fbcuapdp5oeph" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="34" cy="33" fill="#000000" filter="url(#fbcuapdp5oeph)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="79" y="8"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="79" x2="213" y1="34.2969" y2="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="105" y="25.9951">ServerOpen</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="114" x="84" y="50.4355">Create Strategizer</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="248" y="8"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="248" x2="400" y1="34.2969" y2="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="258" y="25.9951">WaitForTransaction</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="148.5" y="135"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="148.5" x2="341.5" y1="161.2969" y2="161.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="158.5" y="152.9951">HandleServerTransaction</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="153.5" y="177.4355">Send request</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="146.5" y="246"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="341.5" y1="272.2969" y2="272.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="165.5" y="263.9951">ReadResponseHeader</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="175" x="151.5" y="288.4355">Wait for upstream response</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="151.5" y="373"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="340.5" y1="399.2969" y2="399.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="169" x="161.5" y="390.9951">HandleResponseHeader</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="162" x="156.5" y="415.4355">Read and validate header</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="18" y="484"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="18" x2="200" y1="510.2969" y2="510.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="28" y="501.9951">ReportServerResponse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="125" x="23" y="526.4355">Report to stategizer</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="23" y="540.4043">Get next action</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="330.5" y="484"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="330.5" x2="459.5" y1="510.2969" y2="510.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="341.5" y="501.9951">DrainResponse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="89" x="335.5" y="526.4355">Drain reponse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="109" x="335.5" y="540.4043">Signal strategizer</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="6" y="625"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="6" x2="212" y1="651.2969" y2="651.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="163" x="27.5" y="642.9951">HandleServerResponse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="186" x="11" y="667.4355">Send response to User Agent</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="109" x="11" y="681.4043">Signal strategizer</text><!--link *start to ServerOpen--><path d="M44.06,33 C53.9,33 63.73,33 73.56,33 " fill="none" id="*start-ServerOpen" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="78.71,33,69.71,29,73.71,33,69.71,37,78.71,33" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ServerOpen to WaitForTransaction--><path d="M213.1,33 C222.94,33 232.77,33 242.61,33 " fill="none" id="ServerOpen-WaitForTransaction" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="247.75,33,238.75,29,242.75,33,238.75,37,247.75,33" style="stroke: #A80036; stroke-width: 1.0;"/><!--link WaitForTransaction to HandleServerTransaction--><path d="M286.98,58.23 C276.84,66.54 266.79,76.65 260,88 C252.52,100.5 248.74,116.2 246.84,129.65 " fill="none" id="WaitForTransaction-HandleServerTransaction" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="246.18,134.88,251.2804,126.4547,246.809,129.9197,243.3439,125.4483,246.18,134.88" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="261" y="101.0669">SESSION_READY</text><!--link HandleServerTransaction to ReadResponseHeader--><path d="M244.78,185.19 C244.63,201.56 244.43,223.28 244.27,240.64 " fill="none" id="HandleServerTransaction-ReadResponseHeader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="244.22,245.88,248.297,236.9146,244.2629,240.8802,240.2973,236.846,244.22,245.88" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ReadResponseHeader to HandleResponseHeader--><path d="M244.39,296.1 C244.71,316.59 245.19,346.08 245.53,367.88 " fill="none" id="ReadResponseHeader-HandleResponseHeader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="245.62,372.97,249.491,363.9138,245.5486,367.9705,241.4918,364.0281,245.62,372.97" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="247" y="339.0669">HTTP response</text><!--link ReadResponseHeader to ReportServerResponse--><path d="M151.01,296.04 C111.78,311.28 69.95,335.45 47,373 C25.92,407.49 50.95,450.41 75.21,479.98 " fill="none" id="ReadResponseHeader-ReportServerResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="78.47,483.88,75.7673,474.4092,75.2634,480.0436,69.6291,479.5397,78.47,483.88" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="48" y="402.5669">network error</text><!--link ReportServerResponse to DrainResponse--><path d="M200.28,516 C240.8,516 287.72,516 325.35,516 " fill="none" id="ReportServerResponse-DrainResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="330.37,516,321.37,512,325.37,516,321.37,520,330.37,516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="218.25" y="509.0669">ACTION: RETRY</text><!--link DrainResponse to WaitForTransaction--><path d="M395,483.98 C395,460.62 395,427.8 395,399 C395,159 395,159 395,159 C395,125.96 389.38,116.69 373,88 C367.71,78.74 360.6,69.73 353.44,61.81 " fill="none" id="DrainResponse-WaitForTransaction" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="349.93,58.01,353.1104,67.3312,353.3273,61.6785,358.98,61.8955,349.93,58.01" style="stroke: #A80036; stroke-width: 1.0;"/><!--link HandleResponseHeader to ReportServerResponse--><path d="M217.61,423.04 C197.99,439.65 171.58,462.01 149.71,480.53 " fill="none" id="HandleResponseHeader-ReportServerResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="145.69,483.94,155.1438,481.1785,149.5064,480.7096,149.9752,475.0723,145.69,483.94" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ReportServerResponse to HandleServerResponse--><path d="M109,548.19 C109,569.39 109,597.49 109,619.69 " fill="none" id="ReportServerResponse-HandleServerResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="109,624.91,113,615.91,109,619.91,105,615.91,109,624.91" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="110" y="591.0669">ACTION: DONE</text><!--
@startuml
[*] -> ServerOpen
ServerOpen -> WaitForTransaction
WaitForTransaction - -> HandleServerTransaction : SESSION_READY
HandleServerTransaction - -> ReadResponseHeader
ReadResponseHeader - -> HandleResponseHeader : HTTP response
ReadResponseHeader -> ReportServerResponse : network error
ReportServerResponse -> DrainResponse : ACTION: RETRY
DrainResponse - -> WaitForTransaction
HandleResponseHeader - -> ReportServerResponse
ReportServerResponse - -> HandleServerResponse : ACTION: DONE

state ServerOpen : Create Strategizer
HandleServerTransaction : Send request
ReadResponseHeader : Wait for upstream response
HandleResponseHeader : Read and validate header
ReportServerResponse: Report to stategizer\nGet next action
HandleServerResponse : Send response to User Agent\nSignal strategizer
DrainResponse : Drain reponse\nSignal strategizer

@enduml

PlantUML version 1.2017.18(Fri Oct 06 11:56:32 CDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_292-b10
Operating System: Linux
OS Version: 5.11.22-100.fc32.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>