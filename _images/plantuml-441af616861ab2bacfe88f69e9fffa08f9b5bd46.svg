<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="700px" preserveAspectRatio="none" style="width:473px;height:700px;" version="1.1" viewBox="0 0 473 700" width="473px" zoomAndPan="magnify"><defs><filter height="300%" id="fbcuapdp5oeph" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="36" cy="33" fill="#000000" filter="url(#fbcuapdp5oeph)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="81.5" y="8"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="81.5" x2="210.5" y1="34.2969" y2="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="103.5" y="25.9951">ServerOpen</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="109" x="86.5" y="50.4355">Create Strategizer</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="159" x="245.5" y="8"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="245.5" x2="404.5" y1="34.2969" y2="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="255.5" y="25.9951">WaitForTransaction</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="142" y="135"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="142" x2="344" y1="161.2969" y2="161.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="182" x="152" y="152.9951">HandleServerTransaction</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="81" x="147" y="177.4355">Send request</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="149.5" y="246"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="149.5" x2="336.5" y1="272.2969" y2="272.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="159" x="163.5" y="263.9951">ReadResponseHeader</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="154.5" y="288.4355">Wait for upstream response</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="149.5" y="373"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="149.5" x2="342.5" y1="399.2969" y2="399.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="159.5" y="390.9951">HandleResponseHeader</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="154.5" y="415.4355">Read and validate header</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="12" y="484"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="12" x2="196" y1="510.2969" y2="510.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="164" x="22" y="501.9951">ReportServerResponse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="119" x="17" y="526.4355">Report to stategizer</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="17" y="540.4043">Get next action</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="333" y="484"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="333" x2="461" y1="510.2969" y2="510.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="343" y="501.9951">DrainResponse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="338" y="526.4355">Drain reponse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="338" y="540.4043">Signal strategizer</text><rect fill="#FEFECE" filter="url(#fbcuapdp5oeph)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="6" y="625"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="6" x2="202" y1="651.2969" y2="651.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="20.5" y="642.9951">HandleServerResponse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="11" y="667.4355">Send response to User Agent</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="11" y="681.4043">Signal strategizer</text><!--link *start to ServerOpen--><path d="M46.3125,33 C56.2606,33 66.2086,33 76.1567,33 " fill="none" id="*start-ServerOpen" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="81.3589,33,72.3589,29,76.3589,33,72.3589,37,81.3589,33" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ServerOpen to WaitForTransaction--><path d="M210.6777,33 C220.4383,33 230.1989,33 239.9596,33 " fill="none" id="ServerOpen-WaitForTransaction" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="245.0637,33,236.0637,29,240.0637,33,236.0637,37,245.0637,33" style="stroke: #A80036; stroke-width: 1.0;"/><!--link WaitForTransaction to HandleServerTransaction--><path d="M288.9066,58.1019 C278.9432,66.5801 268.9684,76.7746 262,88 C254.2351,100.5085 249.6187,116.1366 246.8862,129.6333 " fill="none" id="WaitForTransaction-HandleServerTransaction" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="245.8946,134.8832,251.4957,126.7821,246.8227,129.9701,243.6348,125.2971,245.8946,134.8832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="263" y="101.0669">SESSION_READY</text><!--link HandleServerTransaction to ReadResponseHeader--><path d="M243,185.1876 C243,201.6504 243,223.2461 243,240.6543 " fill="none" id="HandleServerTransaction-ReadResponseHeader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="243,245.9121,247,236.9121,243,240.9121,239,236.9121,243,245.9121" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ReadResponseHeader to HandleResponseHeader--><path d="M243.5927,296.0911 C244.0796,316.7035 244.7708,345.9647 245.2878,367.8484 " fill="none" id="ReadResponseHeader-HandleResponseHeader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="245.4085,372.961,249.1945,363.8689,245.2902,367.9624,241.1967,364.0581,245.4085,372.961" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="246" y="339.0669">HTTP response</text><!--link ReadResponseHeader to ReportServerResponse--><path d="M149.4553,294.5416 C109.0584,309.852 65.6983,334.3989 42,373 C20.9312,407.318 45.3099,450.0611 69.4167,479.8367 " fill="none" id="ReadResponseHeader-ReportServerResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="72.6579,483.7669,70.0175,474.2786,69.4766,479.9095,63.8457,479.3686,72.6579,483.7669" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="43" y="402.5669">network error</text><!--link ReportServerResponse to DrainResponse--><path d="M196.3049,516 C238.8465,516 288.4858,516 327.7531,516 " fill="none" id="ReportServerResponse-DrainResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="332.9779,516,323.9779,512,327.9779,516,323.9779,520,332.9779,516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="214.5" y="509.0669">ACTION: RETRY</text><!--link DrainResponse to WaitForTransaction--><path d="M397,483.9472 C397,460.2146 397,427.0903 397,398 C397,160 397,160 397,160 C397,126.5395 391.5439,117.0844 375,88 C369.791,78.8425 362.8192,69.9321 355.7388,62.0427 " fill="none" id="DrainResponse-WaitForTransaction" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="352.2615,58.255,355.4016,67.5899,355.643,61.9382,361.2947,62.1795,352.2615,58.255" style="stroke: #A80036; stroke-width: 1.0;"/><!--link HandleResponseHeader to ReportServerResponse--><path d="M215.8855,423.0248 C195.8054,439.711 169.1067,461.8972 146.8263,480.412 " fill="none" id="HandleResponseHeader-ReportServerResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="142.72,483.8242,152.1984,481.1484,146.5655,480.6286,147.0854,474.9956,142.72,483.8242" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ReportServerResponse to HandleServerResponse--><path d="M104,548.3482 C104,569.5745 104,597.4037 104,619.5832 " fill="none" id="ReportServerResponse-HandleServerResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="104,624.8023,108,615.8023,104,619.8023,100,615.8023,104,624.8023" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="105" y="591.0669">ACTION: DONE</text><!--
@startuml
[*] -> ServerOpen
ServerOpen -> WaitForTransaction
WaitForTransaction - -> HandleServerTransaction : SESSION_READY
HandleServerTransaction - -> ReadResponseHeader
ReadResponseHeader - -> HandleResponseHeader : HTTP response
ReadResponseHeader -> ReportServerResponse : network error
ReportServerResponse -> DrainResponse : ACTION: RETRY
DrainResponse - -> WaitForTransaction
HandleResponseHeader - -> ReportServerResponse
ReportServerResponse - -> HandleServerResponse : ACTION: DONE

state ServerOpen : Create Strategizer
HandleServerTransaction : Send request
ReadResponseHeader : Wait for upstream response
HandleResponseHeader : Read and validate header
ReportServerResponse: Report to stategizer\nGet next action
HandleServerResponse : Send response to User Agent\nSignal strategizer
DrainResponse : Drain reponse\nSignal strategizer

@enduml

PlantUML version 1.2018.01(Sun Jan 28 12:08:22 CST 2018)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_181-b15
Operating System: Linux
OS Version: 4.18.12-200.fc28.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>